<%@ Page Title="" Language="C#" MasterPageFile="~/Views/DashBoard/Department_Homepage/Department_Master.Master" AutoEventWireup="true" CodeBehind="Manage_Appointment.aspx.cs" Inherits="Gabay_Final_V2.Views.Modules.Appointment.Manage_Appointment" %>

<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">

    <style>
        /* Add custom CSS styles for the table */
        .unique-table {
            width: 100%;
        }

            .unique-table th, .unique-table td {
                padding: 8px;
                text-align: center;
                background-color: white;
                font-size: 14px;
            }

            .unique-table th {
                font-weight: bold;
                background-color: #428bca; /* Blue header background color */
                color: white; /* White text color */
            }

            /* Add some hover effect on rows to make it more interactive */
            .unique-table tbody tr:hover {
                background-color: #e0e0e0; /* Lighter gray on hover */
            }

        /* Media query for responsive design */
        @media (max-width: 768px) {
            .unique-table th, .unique-table td {
                padding: 6px; /* Adjust padding for smaller screens */
                font-size: 14px; /* Adjust font size for smaller screens */
            }
        }

        /* katung status nga dropdown button*/
        .custom-dropdown {
            width: 150px; /* Adjust the width as needed */
            padding: 5px; /* Add padding for better appearance */
            border: 1px solid #ccc; /* Add a border for styling */
            border-radius: 5px; /* Add rounded corners */
            background-color: #fff; /* Set the background color */
            color: #333; /* Set the text color */
            font-size: 14px; /* Set the font size */
            text-align: center;
        }

        .small-button {
            width: 100px; /* Adjust the width as needed */
            height: 30px; /* Adjust the height as needed */
            font-size: 12px; /* Adjust the font size as needed */
        }
    </style>
    <div>
        <asp:GridView ID="UniqueNameGridViewAppointments" runat="server" CssClass="table table-responsive unique-table" AutoGenerateColumns="False">
            <Columns>
                <asp:BoundField DataField="IdNumber" HeaderText="ID Number" />
                <asp:BoundField DataField="department_ID" HeaderText="Department ID" />
                <asp:BoundField DataField="full_name" HeaderText="Full Name" />
                <asp:BoundField DataField="Year" HeaderText="Year" />
                <asp:BoundField DataField="ContactNumber" HeaderText="Contact Number" />
                <asp:BoundField DataField="Email" HeaderText="Email" />
                <asp:TemplateField HeaderText="Message">
                    <ItemTemplate>
                        <asp:LinkButton ID="btnViewMessage" CssClass="btn btn-primary btn-sm" runat="server" OnClientClick='<%# "setAppointmentID(" + Eval("ID_appointment") + ");" %>' OnClick="btnViewMessage_Click">
                    View
                        </asp:LinkButton>
                    </ItemTemplate>
                </asp:TemplateField>

                <asp:BoundField DataField="SelectedDate" HeaderText="Selected Date" />
                <asp:BoundField DataField="SelectedTime" HeaderText="Selected Time" />
                <asp:TemplateField>
                    <HeaderTemplate>
                        <div style="position: relative;">
                            Status
                    <asp:DropDownList ID="ddlStatusFilter" runat="server" CssClass="custom-dropdown" AutoPostBack="true" OnSelectedIndexChanged="ddlStatusFilter_SelectedIndexChanged">
                        <asp:ListItem Text="Select Down Below" Value="" />
                        <asp:ListItem Text="Pending" Value="Pending" style="color: black;" />
                        <asp:ListItem Text="Serve" Value="Serve" style="color: orange;" />
                        <asp:ListItem Text="Approved" Value="APPROVED" style="color: green;" />
                        <asp:ListItem Text="Denied" Value="DENIED" style="color: red;" />
                        <asp:ListItem Text="Rescheduled" Value="RESCHEDULED" style="color: blue;" />
                    </asp:DropDownList>
                        </div>
                    </HeaderTemplate>
                    <ItemTemplate>
                        <asp:HiddenField ID="hfStatus" runat="server" Value='<%# Eval("Status") %>' />
                        <asp:DropDownList ID="DropDownList1" runat="server"></asp:DropDownList>
                    </ItemTemplate>
                </asp:TemplateField>

                <asp:TemplateField HeaderText="Action">
                    <ItemTemplate>
                        <asp:Button ID="Button1" runat="server" CssClass="btn btn-danger btn-sm" CommandName="DeleteAppointment" CommandArgument='<%# Eval("ID_appointment") %>' Text="Delete" />
                    </ItemTemplate>
                </asp:TemplateField>
            </Columns>
        </asp:GridView>
        <asp:HiddenField ID="HiddenField1" runat="server" />

        <!-- Modal for Message -->
        <div class="modal fade" id="dtldModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <span class="modal-title fs-5" id="detailedHeader"></span>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <asp:Label ID="dtldMessage" runat="server" Text="Title"></asp:Label>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>


        <%-- Success modal --%>
        <div class="modal fade" id="successModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-body bg-success text-center text-light">
                        <i class="bi bi-info-circle-fill"></i>
                        <p id="successMessage"></p>
                    </div>
                </div>
            </div>
        </div>
        <%-- Error modal --%>
        <div class="modal fade" id="errorModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-body bg-danger text-center text-light">
                        <i class="bi bi-exclamation-circle-fill"></i>
                        <p id="errorMessage"></p>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <script>
        function setAppointmentID(appointmentID) {
            console.log('setAppointmentID is called with ID: ' + appointmentID);
            document.getElementById('<%= HiddenField1.ClientID %>').value = appointmentID;
        }
    </script>



</asp:Content>

